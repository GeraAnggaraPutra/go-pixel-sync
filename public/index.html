<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Studio Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="status-bar">
        ‚óè <span id="userCount">0</span> users online &nbsp;|&nbsp; Logged in as: <span id="myNameDisplay">...</span>
    </div>

    <div class="controls">
        <input type="color" id="colorPicker" value="#1d1d1f">
        
        <div style="display:flex; gap:4px;">
            <button id="btnPencil" class="active" onclick="setMode('pencil')">‚úé Pencil</button>
            <button id="btnEraser" onclick="setMode('eraser')">‚å´ Eraser</button>
        </div>

        <div style="display:flex; gap:8px; border-left: 1px solid #eee; padding-left:12px; align-items: center;">
            <span style="font-size: 13px; font-weight: 600;">Size:</span>
            <input type="number" id="inputGridSize" value="20" min="5" max="100" style="width: 50px; padding: 5px; border-radius: 6px; border: 1px solid #ddd;">
            <button onclick="resizeCanvas()">Apply</button>
        </div>

        <div style="display:flex; gap:4px; border-left: 1px solid #eee; padding-left:12px;">
            <button onclick="execUndo()">Undo</button>
            <button onclick="execRedo()">Redo</button>
        </div>

        <label class="grid-toggle-container">
            <span>Show Grid</span>
            <div class="switch">
                <input type="checkbox" id="gridToggle" checked onclick="toggleGrid()">
                <span class="slider"></span>
            </div>
        </label>

        <button class="danger" onclick="execDeleteAll()">Clear</button>
        <button id="btnExport" onclick="execExport()" style="background: var(--primary-color); color: white;">Export PNG</button>
    </div>

    <div class="canvas-wrapper" id="wrapper">
        <canvas id="canvas"></canvas>
    </div>

    <button id="chatToggleBtn" onclick="toggleChatPopup()">üí¨ Chat</button>

    <div class="chat-popup" id="chatPopup">
        <div class="chat-header">
            <span>Live Chat</span>
            <button id="chatToggleBtn" onclick="toggleChatPopup()">
                <span id="chatBadge">0</span>
                üí¨ Chat
            </button>
        </div>
        <div id="chatMessages" class="chat-messages">
            </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Type message..." maxlength="100">
            <button onclick="sendChatMessage()">Send</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>